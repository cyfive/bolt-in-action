# bolt-in-action
## О проекте
Минимальное оружение для изучения Puppet Bolt.

## Установка и запуск
Для развертывания окружения используется HashiCorp Vagrant. Скачайте его с [сайта](https://www.vagrantup.com/) для своей платформы и установите.

Склонируйте этот репозиторий и разверните окружение командой:

```
vagrant up
```

По окончании создания виртуальных машин и их автоматической настройки, зайдите по ssh на управляющую ноду командой:

```
vagrant ssh bolt_node
```

Для проверки корректности настройки выпоните следующие команды:

```
cd /vagrant/bolt-in-action
bolt command run "uname -a" --nodes node_01,node_02,node_03
```
## Состав окружения
В окружении разворачиваются четыре виртуальных машины:

* node_01 (192.168.254.10)
* node_02 (192.168.254.11)
* node_03 (192.168.254.12)
* bolt_node (192.168.254.13)

Первые три являются нодами на которых вы можете тренироваться в развертывании ваших задач и планов, четвертая нода (bolt_node), это нода с которой производятся тестовые запуски и на которой ведется разработка планов и задач для Puppet Bolt. С этой ноды настроен доступ по ssh на node_XX, на ней так-же предустанавливается Puppet Development Kit (PDK) который поможет вам при разработке задач, планов и модулей. 

## Примечание для тех, кто использует libvirt провайдер в Vagrant
При использовании libvirt провайдера в vagrant ограничен функционал управления сетью при создании окружения, для работы нужно убрать все строки в Vagrantfile:
```
node_01.vm.network "private_network", ip: "192.168.254.10"
node_02.vm.network "private_network", ip: "192.168.254.11"
node_03.vm.network "private_network", ip: "192.168.254.12"
bolt_node.vm.network "private_network", ip: "192.168.254.13"
```
После нужно создать окружение и внести в файл `bolt-in-action/Boltdir/inventory.yaml` актуальные ip адреса виртуальных машин. После перезагрузки окружения обновленный каталог проекта будет доставлен на виртуальную машину bolt_node.
